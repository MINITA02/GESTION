{"version":3,"file":"static/js/508.e0d58aec.chunk.js","mappings":"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","sources":["components/usuario/gestionDocumentos.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport jsPDF from 'jspdf';\r\nimport '../../assets/css/gestionDocumento.css';\r\n\r\nconst GestionDocumentos: React.FC = () => {\r\n  const [rol, setRol] = useState<string | null>(null);\r\n  const [informes, setInformes] = useState<any[]>([]);\r\n  const [nuevoInforme, setNuevoInforme] = useState({\r\n    titulo: '',\r\n    informe: '',\r\n    fecha: '',\r\n    departamento: '',\r\n  });\r\n\r\n  useEffect(() => {\r\n    const usuarioActual = JSON.parse(sessionStorage.getItem('usuarioActual') || '{}');\r\n    if (usuarioActual) {\r\n      setRol(usuarioActual.rol);\r\n    }\r\n    const informesGuardados = JSON.parse(localStorage.getItem('informes') || '[]');\r\n    setInformes(informesGuardados);\r\n  }, []);\r\n\r\n  const validarNuevoInforme = () => {\r\n    const { titulo, informe, fecha, departamento } = nuevoInforme;\r\n    if (!titulo || !informe || !fecha || !departamento) {\r\n      alert('Por favor, complete todos los campos obligatorios.');\r\n      return false;\r\n    }\r\n\r\n    if (titulo.length < 5 || titulo.length > 20) {\r\n      alert('El título debe tener entre 5 y 20 caracteres.');\r\n      return false;\r\n    }\r\n\r\n    if (informe.length > 100) {\r\n      alert('El informe no puede tener más de 100 caracteres.');\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  };\r\n\r\n  const handleSubmit = (event: React.FormEvent) => {\r\n    event.preventDefault();\r\n    if (validarNuevoInforme()) {\r\n      const nuevoId = Date.now() + Math.random().toString(36).substr(2, 9);\r\n      const informeConId = { ...nuevoInforme, id: nuevoId };\r\n      const nuevosInformes = [...informes, informeConId];\r\n      setInformes(nuevosInformes);\r\n      localStorage.setItem('informes', JSON.stringify(nuevosInformes));\r\n      setNuevoInforme({ titulo: '', informe: '', fecha: '', departamento: '' });\r\n    }\r\n  };\r\n\r\n  const handleChange = (event: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement>) => {\r\n    const { id, value } = event.target;\r\n    setNuevoInforme({ ...nuevoInforme, [id]: value });\r\n  };\r\n\r\n  const imprimirInforme = (id: string) => {\r\n    const doc = new jsPDF();\r\n    const informe = informes.find(informe => informe.id === id);\r\n\r\n    if (informe) {\r\n      doc.setFontSize(12);\r\n      doc.text(`Título: ${informe.titulo}`, 10, 10);\r\n      doc.text(`Informe: ${informe.informe}`, 10, 20);\r\n      doc.text(`Fecha: ${informe.fecha}`, 10, 30);\r\n      doc.text(`Departamento: ${informe.departamento}`, 10, 40);\r\n      doc.save(`informe_${informe.id}.pdf`);\r\n    }\r\n  };\r\n\r\n  const borrarInforme = (id: string) => {\r\n    const nuevosInformes = informes.filter(informe => informe.id !== id);\r\n    setInformes(nuevosInformes);\r\n    localStorage.setItem('informes', JSON.stringify(nuevosInformes));\r\n  };\r\n\r\n  const editarInforme = (id: string) => {\r\n    const informe = informes.find(informe => informe.id === id);\r\n    if (informe) {\r\n      const nuevoTitulo = prompt('Nuevo título:', informe.titulo);\r\n      const nuevoInforme = prompt('Nuevo informe:', informe.informe);\r\n      const nuevaFecha = prompt('Nueva fecha:', informe.fecha);\r\n      const nuevoDepartamento = prompt('Nuevo departamento:', informe.departamento);\r\n\r\n      if (nuevoTitulo && nuevoInforme && nuevaFecha && nuevoDepartamento) {\r\n        const informeEditado = { ...informe, titulo: nuevoTitulo, informe: nuevoInforme, fecha: nuevaFecha, departamento: nuevoDepartamento };\r\n        const nuevosInformes = informes.map(inf => (inf.id === id ? informeEditado : inf));\r\n        setInformes(nuevosInformes);\r\n        localStorage.setItem('informes', JSON.stringify(nuevosInformes));\r\n      }\r\n    }\r\n  };\r\n\r\n  if (rol !== 'editar') {\r\n    return <p>No tiene el rol necesario para gestionar documentos.</p>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"container\">\r\n       <header className=\"arriba\">\r\n                <div className=\"barra\">\r\n                    <img src=\"../imagen/logito.png\" alt=\"logo uleam\" className=\"logito\" />\r\n                    <nav className=\"logo\">\r\n                        <div className=\"btn-container\">\r\n                            <a href='/perfil'>Perfil</a>\r\n                        </div>\r\n                    </nav>\r\n                    <nav className=\"navegacion\">\r\n                        <div className=\"btn-container\">\r\n                            <a href='/gestionDocumentos'>Gestión de documentos</a>\r\n                            <a href='/verDocumentos'>Buscar documentos</a>\r\n                        </div>\r\n                    </nav>\r\n                    <nav className=\"iniciarSesion\">\r\n                        <div className=\"btn-container\">\r\n                            <a href='/'>Cerrar sesión</a>\r\n                        </div>\r\n                    </nav>\r\n                </div>\r\n      </header>\r\n      <h1>Gestión de Informes</h1>\r\n      <form id=\"informeForm\" onSubmit={handleSubmit}>\r\n        <input type=\"text\" id=\"titulo\" placeholder=\"Título\" value={nuevoInforme.titulo} onChange={handleChange} required />\r\n        <textarea id=\"informe\" placeholder=\"Informe\" value={nuevoInforme.informe} onChange={handleChange} required />\r\n        <input type=\"date\" id=\"fecha\" value={nuevoInforme.fecha} onChange={handleChange} required />\r\n        <select id=\"departamento\" value={nuevoInforme.departamento} onChange={handleChange} required>\r\n          <option value=\"\">Seleccione un departamento</option>\r\n          <option value=\"informatica\">Informática</option>\r\n          <option value=\"administracion\">Administración</option>\r\n          <option value=\"contabilidad\">Contabilidad</option>\r\n          <option value=\"medicina\">Medicina</option>\r\n          <option value=\"educacion\">Educación</option>\r\n          <option value=\"derecho\">Derecho</option>\r\n        </select>\r\n        <button type=\"submit\">Agregar Informe</button>\r\n      </form>\r\n      <div id=\"informesContainer\">\r\n        {informes.map(informe => (\r\n          <div key={informe.id} className=\"informe\">\r\n            <h2>{informe.titulo}</h2>\r\n            <p>{informe.informe}</p>\r\n            <p><strong>Fecha:</strong> {informe.fecha}</p>\r\n            <p><strong>Departamento:</strong> {informe.departamento}</p>\r\n            <button onClick={() => imprimirInforme(informe.id)}>Imprimir Informe</button>\r\n            <button onClick={() => editarInforme(informe.id)}>Editar</button>\r\n            <button onClick={() => borrarInforme(informe.id)}>Borrar</button>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default GestionDocumentos;\r\n"],"names":["GestionDocumentos","rol","setRol","useState","informes","setInformes","nuevoInforme","setNuevoInforme","titulo","informe","fecha","departamento","useEffect","usuarioActual","JSON","parse","sessionStorage","getItem","informesGuardados","localStorage","handleChange","event","id","value","target","_jsx","children","_jsxs","className","src","alt","href","onSubmit","preventDefault","validarNuevoInforme","length","alert","nuevoId","Date","now","Math","random","toString","substr","informeConId","nuevosInformes","setItem","stringify","type","placeholder","onChange","required","map","onClick","doc","jsPDF","find","setFontSize","text","concat","save","imprimirInforme","nuevoTitulo","prompt","nuevaFecha","nuevoDepartamento","informeEditado","inf","editarInforme","filter","borrarInforme"],"sourceRoot":""}