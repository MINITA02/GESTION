"use strict";(self.webpackChunkgestion_documental=self.webpackChunkgestion_documental||[]).push([[508],{5508:(e,t,n)=>{n.r(t),n.d(t,{default:()=>r});var o=n(5043),i=n(3721),a=(n(4616),n(579));const r=()=>{const[e,t]=(0,o.useState)(null),[n,r]=(0,o.useState)([]),[s,c]=(0,o.useState)({titulo:"",informe:"",fecha:"",departamento:""});(0,o.useEffect)((()=>{const e=JSON.parse(sessionStorage.getItem("usuarioActual")||"{}");e&&t(e.rol);const n=JSON.parse(localStorage.getItem("informes")||"[]");r(n)}),[]);const l=e=>{const{id:t,value:n}=e.target;c({...s,[t]:n})};return"editar"!==e?(0,a.jsx)("p",{children:"No tiene el rol necesario para gestionar documentos."}):(0,a.jsxs)("div",{className:"container",children:[(0,a.jsx)("header",{className:"arriba",children:(0,a.jsxs)("div",{className:"barra",children:[(0,a.jsx)("img",{src:"../imagen/logito.png",alt:"logo uleam",className:"logito"}),(0,a.jsx)("nav",{className:"logo",children:(0,a.jsx)("div",{className:"btn-container",children:(0,a.jsx)("a",{href:"/perfil",children:"Perfil"})})}),(0,a.jsx)("nav",{className:"navegacion",children:(0,a.jsxs)("div",{className:"btn-container",children:[(0,a.jsx)("a",{href:"/gestionDocumentos",children:"Gesti\xf3n de documentos"}),(0,a.jsx)("a",{href:"/verDocumentos",children:"Buscar documentos"})]})}),(0,a.jsx)("nav",{className:"iniciarSesion",children:(0,a.jsx)("div",{className:"btn-container",children:(0,a.jsx)("a",{href:"/",children:"Cerrar sesi\xf3n"})})})]})}),(0,a.jsx)("h1",{children:"Gesti\xf3n de Informes"}),(0,a.jsxs)("form",{id:"informeForm",onSubmit:e=>{if(e.preventDefault(),(()=>{const{titulo:e,informe:t,fecha:n,departamento:o}=s;return e&&t&&n&&o?e.length<5||e.length>20?(alert("El t\xedtulo debe tener entre 5 y 20 caracteres."),!1):!(t.length>100)||(alert("El informe no puede tener m\xe1s de 100 caracteres."),!1):(alert("Por favor, complete todos los campos obligatorios."),!1)})()){const e=Date.now()+Math.random().toString(36).substr(2,9),t={...s,id:e},o=[...n,t];r(o),localStorage.setItem("informes",JSON.stringify(o)),c({titulo:"",informe:"",fecha:"",departamento:""})}},children:[(0,a.jsx)("input",{type:"text",id:"titulo",placeholder:"T\xedtulo",value:s.titulo,onChange:l,required:!0}),(0,a.jsx)("textarea",{id:"informe",placeholder:"Informe",value:s.informe,onChange:l,required:!0}),(0,a.jsx)("input",{type:"date",id:"fecha",value:s.fecha,onChange:l,required:!0}),(0,a.jsxs)("select",{id:"departamento",value:s.departamento,onChange:l,required:!0,children:[(0,a.jsx)("option",{value:"",children:"Seleccione un departamento"}),(0,a.jsx)("option",{value:"informatica",children:"Inform\xe1tica"}),(0,a.jsx)("option",{value:"administracion",children:"Administraci\xf3n"}),(0,a.jsx)("option",{value:"contabilidad",children:"Contabilidad"}),(0,a.jsx)("option",{value:"medicina",children:"Medicina"}),(0,a.jsx)("option",{value:"educacion",children:"Educaci\xf3n"}),(0,a.jsx)("option",{value:"derecho",children:"Derecho"})]}),(0,a.jsx)("button",{type:"submit",children:"Agregar Informe"})]}),(0,a.jsx)("div",{id:"informesContainer",children:n.map((e=>(0,a.jsxs)("div",{className:"informe",children:[(0,a.jsx)("h2",{children:e.titulo}),(0,a.jsx)("p",{children:e.informe}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Fecha:"})," ",e.fecha]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Departamento:"})," ",e.departamento]}),(0,a.jsx)("button",{onClick:()=>(e=>{const t=new i.Ay,o=n.find((t=>t.id===e));o&&(t.setFontSize(12),t.text("T\xedtulo: ".concat(o.titulo),10,10),t.text("Informe: ".concat(o.informe),10,20),t.text("Fecha: ".concat(o.fecha),10,30),t.text("Departamento: ".concat(o.departamento),10,40),t.save("informe_".concat(o.id,".pdf")))})(e.id),children:"Imprimir Informe"}),(0,a.jsx)("button",{onClick:()=>(e=>{const t=n.find((t=>t.id===e));if(t){const o=prompt("Nuevo t\xedtulo:",t.titulo),i=prompt("Nuevo informe:",t.informe),a=prompt("Nueva fecha:",t.fecha),s=prompt("Nuevo departamento:",t.departamento);if(o&&i&&a&&s){const c={...t,titulo:o,informe:i,fecha:a,departamento:s},l=n.map((t=>t.id===e?c:t));r(l),localStorage.setItem("informes",JSON.stringify(l))}}})(e.id),children:"Editar"}),(0,a.jsx)("button",{onClick:()=>(e=>{const t=n.filter((t=>t.id!==e));r(t),localStorage.setItem("informes",JSON.stringify(t))})(e.id),children:"Borrar"})]},e.id)))})]})}},4616:()=>{}}]);
//# sourceMappingURL=508.e0d58aec.chunk.js.map