{"version":3,"file":"static/js/230.47f94f6c.chunk.js","mappings":"gMAIA,MAsIA,EAtIgCA,KAC9B,MAAOC,EAAKC,IAAUC,EAAAA,EAAAA,UAAwB,OACvCC,EAAqBC,IAA0BF,EAAAA,EAAAA,UAAwB,OACvEG,EAAeC,IAAoBJ,EAAAA,EAAAA,UAAwB,OAC3DK,EAAUC,IAAeN,EAAAA,EAAAA,UAAgB,KACzCO,EAAYC,IAAiBR,EAAAA,EAAAA,UAAiB,KAC9CS,EAAiBC,IAAsBV,EAAAA,EAAAA,UAAoC,CAAC,IAEnFW,EAAAA,EAAAA,YAAU,KACR,MAAMC,EAAgBC,KAAKC,MAAMC,eAAeC,QAAQ,kBAAoB,MACxEJ,IACFb,EAAOa,EAAcd,KACrBI,EAAuBU,EAAcK,cACrCb,EAAiBQ,EAAcM,SAEjC,MAAMC,EAAoBN,KAAKC,MAAMM,aAAaJ,QAAQ,aAAe,MACzEV,EAAYa,EAAkB,GAC7B,IAEH,MA6DME,EAAmBhB,EAASiB,QAAOC,GACvCA,EAAQC,OAAOC,cAAcC,SAASnB,EAAWkB,gBACjDF,EAAQN,eAAiBhB,IAG3B,MAAY,eAARH,GAAgC,WAARA,GACnB6B,EAAAA,EAAAA,KAAA,KAAAC,SAAG,wDAIVC,EAAAA,EAAAA,MAAA,OAAKC,UAAU,YAAWF,SAAA,EACxBD,EAAAA,EAAAA,KAAA,MAAAC,SAAI,4BACJD,EAAAA,EAAAA,KAAA,SACEI,KAAK,OACLC,GAAG,cACHC,YAAY,0BACZC,MAAO3B,EACP4B,SA9EgBC,IACpB5B,EAAc4B,EAAMC,OAAOH,MAAM,KA+E/BP,EAAAA,EAAAA,KAAA,OAAKK,GAAG,oBAAmBJ,SACxBP,EAAiBiB,KAAIf,IACpBM,EAAAA,EAAAA,MAAA,OAAsBC,UAAU,UAASF,SAAA,EACvCD,EAAAA,EAAAA,KAAA,MAAAC,SAAKL,EAAQC,UACbG,EAAAA,EAAAA,KAAA,KAAAC,SAAIL,EAAQA,WACZM,EAAAA,EAAAA,MAAA,KAAAD,SAAA,EAAGD,EAAAA,EAAAA,KAAA,UAAAC,SAAQ,WAAe,IAAEL,EAAQgB,UACpCV,EAAAA,EAAAA,MAAA,KAAAD,SAAA,EAAGD,EAAAA,EAAAA,KAAA,UAAAC,SAAQ,kBAAsB,IAAEL,EAAQN,iBAC3CU,EAAAA,EAAAA,KAAA,UAAQa,QAASA,IAnFFR,KACvB,MAAMS,EAAM,IAAIC,EAAAA,GACVnB,EAAUlB,EAASsC,MAAKpB,GAAWA,EAAQS,KAAOA,IAEpDT,IACFkB,EAAIG,YAAY,IAChBH,EAAII,KAAK,cAADC,OAAYvB,EAAQC,QAAU,GAAI,IAC1CiB,EAAII,KAAK,YAADC,OAAavB,EAAQA,SAAW,GAAI,IAC5CkB,EAAII,KAAK,UAADC,OAAWvB,EAAQgB,OAAS,GAAI,IACxCE,EAAII,KAAK,iBAADC,OAAkBvB,EAAQN,cAAgB,GAAI,IACtDwB,EAAIM,KAAK,WAADD,OAAYvB,EAAQS,GAAE,SAChC,EAwE+BgB,CAAgBzB,EAAQS,IAAIJ,SAAC,sBACpDD,EAAAA,EAAAA,KAAA,UAAQa,QAASA,IAhEJR,KACrB,MAAMT,EAAUlB,EAASsC,MAAKpB,GAAWA,EAAQS,KAAOA,IACxD,GAAIT,EAAS,CACX,MAAM0B,EAAcC,OAAO,mBAAiB3B,EAAQC,QAC9C2B,EAAeD,OAAO,iBAAkB3B,EAAQA,SAChD6B,EAAaF,OAAO,eAAgB3B,EAAQgB,OAC5Cc,EAAoBH,OAAO,sBAAuB3B,EAAQN,cAEhE,GAAIgC,GAAeE,GAAgBC,GAAcC,EAAmB,CAClE,MAAMC,EAAiB,IAAK/B,EAASC,OAAQyB,EAAa1B,QAAS4B,EAAcZ,MAAOa,EAAYnC,aAAcoC,GAC5GE,EAAiBlD,EAASiC,KAAIkB,GAAQA,EAAIxB,KAAOA,EAAKsB,EAAiBE,IAC7ElD,EAAYiD,GACZnC,aAAaqC,QAAQ,WAAY5C,KAAK6C,UAAUH,GAClD,CACF,GAkD+BI,CAAcpC,EAAQS,IAAIJ,SAAC,YAClDD,EAAAA,EAAAA,KAAA,UAAQa,QAASA,IAvEJR,KACrB,MAAMuB,EAAiBlD,EAASiB,QAAOC,GAAWA,EAAQS,KAAOA,IACjE1B,EAAYiD,GACZnC,aAAaqC,QAAQ,WAAY5C,KAAK6C,UAAUH,GAAgB,EAoEjCK,CAAcrC,EAAQS,IAAIJ,SAAC,YAClDC,EAAAA,EAAAA,MAAA,OAAKC,UAAU,cAAaF,SAAA,EAC1BD,EAAAA,EAAAA,KAAA,MAAAC,SAAI,gBACHL,EAAQsC,aAAetC,EAAQsC,YAAYC,OAAS,GACnDnC,EAAAA,EAAAA,KAAA,MAAAC,SACGL,EAAQsC,YAAYvB,KAAI,CAACyB,EAAiBC,KACzCnC,EAAAA,EAAAA,MAAA,MAAAD,SAAA,EAAgBC,EAAAA,EAAAA,MAAA,UAAAD,SAAA,CAASmC,EAAWE,QAAQ,OAAU,IAAEF,EAAWA,aAA1DC,QAIbrC,EAAAA,EAAAA,KAAA,KAAAC,SAAG,yBAELD,EAAAA,EAAAA,KAAA,YAAUG,UAAU,kBAClBG,YAAY,2BACZC,MAAOzB,EAAgBc,EAAQS,KAAO,GACtCG,SAAW+B,IAAMC,OA/DCnC,EA+DsBT,EAAQS,GA/DlBE,EA+DsBgC,EAAE7B,OAAOH,WA9DzExB,EAAmB,IAAKD,EAAiB,CAACuB,GAAKE,IADlBiC,IAACnC,EAAYE,CA+DsC,KAEtEP,EAAAA,EAAAA,KAAA,UAAQG,UAAU,kBAAkBU,QAASA,IA7D9BR,KACzB,MAAM+B,EAAatD,EAAgBuB,GACnC,GAAI+B,EAAY,CACd,MAAMR,EAAiBlD,EAASiC,KAAIf,IAClC,GAAIA,EAAQS,KAAOA,EAAI,CACrB,MAAMoC,EAAoB,IAAK7C,EAAQsC,aAAe,GAAK,CAAEI,QAAS9D,EAAe4D,eACrF,MAAO,IAAKxC,EAASsC,YAAaO,EACpC,CACA,OAAO7C,CAAO,IAEhBjB,EAAYiD,GACZnC,aAAaqC,QAAQ,WAAY5C,KAAK6C,UAAUH,IAChD7C,EAAmB,IAAKD,EAAiB,CAACuB,GAAK,IACjD,GAgD6DqC,CAAkB9C,EAAQS,IAAIJ,SAAC,2BAxB5EL,EAAQS,UA6BlB,C","sources":["components/usuario/verDocumentos.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { jsPDF } from 'jspdf';\r\nimport '../../assets/css/gestionDocumento.css';\r\n\r\nconst VerDocumentos: React.FC = () => {\r\n  const [rol, setRol] = useState<string | null>(null);\r\n  const [departamentoUsuario, setDepartamentoUsuario] = useState<string | null>(null);\r\n  const [usuarioNombre, setUsuarioNombre] = useState<string | null>(null);\r\n  const [informes, setInformes] = useState<any[]>([]);\r\n  const [searchTerm, setSearchTerm] = useState<string>('');\r\n  const [nuevoComentario, setNuevoComentario] = useState<{ [key: string]: string }>({});\r\n\r\n  useEffect(() => {\r\n    const usuarioActual = JSON.parse(sessionStorage.getItem('usuarioActual') || '{}');\r\n    if (usuarioActual) {\r\n      setRol(usuarioActual.rol);\r\n      setDepartamentoUsuario(usuarioActual.departamento);\r\n      setUsuarioNombre(usuarioActual.nombre);\r\n    }\r\n    const informesGuardados = JSON.parse(localStorage.getItem('informes') || '[]');\r\n    setInformes(informesGuardados);\r\n  }, []);\r\n\r\n  const handleSearch = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    setSearchTerm(event.target.value);\r\n  };\r\n\r\n  const imprimirInforme = (id: string) => {\r\n    const doc = new jsPDF();\r\n    const informe = informes.find(informe => informe.id === id);\r\n\r\n    if (informe) {\r\n      doc.setFontSize(12);\r\n      doc.text(`Título: ${informe.titulo}`, 10, 10);\r\n      doc.text(`Informe: ${informe.informe}`, 10, 20);\r\n      doc.text(`Fecha: ${informe.fecha}`, 10, 30);\r\n      doc.text(`Departamento: ${informe.departamento}`, 10, 40);\r\n      doc.save(`informe_${informe.id}.pdf`);\r\n    }\r\n  };\r\n\r\n  const borrarInforme = (id: string) => {\r\n    const nuevosInformes = informes.filter(informe => informe.id !== id);\r\n    setInformes(nuevosInformes);\r\n    localStorage.setItem('informes', JSON.stringify(nuevosInformes));\r\n  };\r\n\r\n  const editarInforme = (id: string) => {\r\n    const informe = informes.find(informe => informe.id === id);\r\n    if (informe) {\r\n      const nuevoTitulo = prompt('Nuevo título:', informe.titulo);\r\n      const nuevoInforme = prompt('Nuevo informe:', informe.informe);\r\n      const nuevaFecha = prompt('Nueva fecha:', informe.fecha);\r\n      const nuevoDepartamento = prompt('Nuevo departamento:', informe.departamento);\r\n\r\n      if (nuevoTitulo && nuevoInforme && nuevaFecha && nuevoDepartamento) {\r\n        const informeEditado = { ...informe, titulo: nuevoTitulo, informe: nuevoInforme, fecha: nuevaFecha, departamento: nuevoDepartamento };\r\n        const nuevosInformes = informes.map(inf => (inf.id === id ? informeEditado : inf));\r\n        setInformes(nuevosInformes);\r\n        localStorage.setItem('informes', JSON.stringify(nuevosInformes));\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleComentarioChange = (id: string, value: string) => {\r\n    setNuevoComentario({ ...nuevoComentario, [id]: value });\r\n  };\r\n\r\n  const agregarComentario = (id: string) => {\r\n    const comentario = nuevoComentario[id];\r\n    if (comentario) {\r\n      const nuevosInformes = informes.map(informe => {\r\n        if (informe.id === id) {\r\n          const nuevosComentarios = [...(informe.comentarios || []), { usuario: usuarioNombre, comentario }];\r\n          return { ...informe, comentarios: nuevosComentarios };\r\n        }\r\n        return informe;\r\n      });\r\n      setInformes(nuevosInformes);\r\n      localStorage.setItem('informes', JSON.stringify(nuevosInformes));\r\n      setNuevoComentario({ ...nuevoComentario, [id]: '' });\r\n    }\r\n  };\r\n\r\n  const filteredInformes = informes.filter(informe =>\r\n    informe.titulo.toLowerCase().includes(searchTerm.toLowerCase()) &&\r\n    informe.departamento === departamentoUsuario\r\n  );\r\n\r\n  if (rol !== 'visualizar' && rol !== 'editar') {\r\n    return <p>No tiene el rol necesario para ver los documentos.</p>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <h1>Gestión de Informes</h1>\r\n      <input\r\n        type=\"text\"\r\n        id=\"searchInput\"\r\n        placeholder=\"Buscar por título...\"\r\n        value={searchTerm}\r\n        onChange={handleSearch}\r\n      />\r\n      <div id=\"informesContainer\">\r\n        {filteredInformes.map(informe => (\r\n          <div key={informe.id} className=\"informe\">\r\n            <h2>{informe.titulo}</h2>\r\n            <p>{informe.informe}</p>\r\n            <p><strong>Fecha:</strong> {informe.fecha}</p>\r\n            <p><strong>Departamento:</strong> {informe.departamento}</p>\r\n            <button onClick={() => imprimirInforme(informe.id)}>Imprimir Informe</button>\r\n            <button onClick={() => editarInforme(informe.id)}>Editar</button>\r\n            <button onClick={() => borrarInforme(informe.id)}>Borrar</button>\r\n            <div className='comentarios'>\r\n              <h3>Comentarios</h3>\r\n              {informe.comentarios && informe.comentarios.length > 0 ? (\r\n                <ul>\r\n                  {informe.comentarios.map((comentario: any, index: number) => (\r\n                    <li key={index}><strong>{comentario.usuario}:</strong> {comentario.comentario}</li>\r\n                  ))}\r\n                </ul>\r\n              ) : (\r\n                <p>No hay comentarios.</p>\r\n              )}\r\n              <textarea className='comentarioLabel'\r\n                placeholder=\"Agregar un comentario...\"\r\n                value={nuevoComentario[informe.id] || ''}\r\n                onChange={(e) => handleComentarioChange(informe.id, e.target.value)}\r\n              />\r\n              <button className=\"comentarioBoton\" onClick={() => agregarComentario(informe.id)}>Enviar Comentario</button>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default VerDocumentos;\r\n"],"names":["VerDocumentos","rol","setRol","useState","departamentoUsuario","setDepartamentoUsuario","usuarioNombre","setUsuarioNombre","informes","setInformes","searchTerm","setSearchTerm","nuevoComentario","setNuevoComentario","useEffect","usuarioActual","JSON","parse","sessionStorage","getItem","departamento","nombre","informesGuardados","localStorage","filteredInformes","filter","informe","titulo","toLowerCase","includes","_jsx","children","_jsxs","className","type","id","placeholder","value","onChange","event","target","map","fecha","onClick","doc","jsPDF","find","setFontSize","text","concat","save","imprimirInforme","nuevoTitulo","prompt","nuevoInforme","nuevaFecha","nuevoDepartamento","informeEditado","nuevosInformes","inf","setItem","stringify","editarInforme","borrarInforme","comentarios","length","comentario","index","usuario","e","handleComentarioChange","nuevosComentarios","agregarComentario"],"sourceRoot":""}